<!DOCTYPE html>
<html>
<head>
  <title>-1.5 Value Finder</title>
  <style>
    *{box-sizing:border-box}body{font-family:system-ui,-apple-system,sans-serif;margin:0;background:#0a0a0a;color:#e0e0e0;min-height:100vh}input,button,select{padding:8px;margin:4px;border-radius:6px;border:1px solid #333;background:#1a1a1a;color:#e0e0e0}button{background:#2563eb;cursor:pointer;transition:all 0.2s}button:hover{background:#1d4ed8}table{width:100%;border-collapse:collapse;margin-top:16px}th,td{padding:8px;text-align:center;border-bottom:1px solid #333}th{background:#1a1a1a;font-weight:600;position:sticky;top:0;z-index:10}tr:hover{background:#1a1a1a}.pos{color:#10b981}.neg{color:#ef4444}.avg-row{font-weight:600;background:#1f2937}.container{max-width:1200px;margin:0 auto;padding:20px}h2{color:#e0e0e0;margin-bottom:20px}.table-container{max-height:70vh;overflow-y:auto;border:1px solid #333;border-radius:8px}
  </style>
</head>
<body>
<div class="container">
  <h2>Underdog â€‘1.5 Value Tracker</h2>
  <label>Underdog ML: <input id="ml" type="number" step="0.01" placeholder="2.10"></label>
  <label>Favorite ML: <input id="fav" type="number" step="0.01" placeholder="1.70"></label>
  <label>Home/Away:
    <select id="loc">
      <option value="home">Home</option>
      <option value="away">Away</option>
    </select>
  </label>
  <button onclick="addRow()">Add Game</button>
  <div class="table-container">
  <table id="tbl">
    <thead>
      <tr>
        <th>Game</th><th>UM</th><th>FM</th><th>Status</th><th>URL</th><th>P_UM (%)</th><th>P_URL (%)</th><th>Discrepancy (%)</th><th>Diff from Avg (%)</th><th>EV (x)</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  </div>
</div>
<script>
  let gameCounter = 0;
  const games = [];
  const exampleData = [
    { um: 2.10, fm: 1.70, status: 'home', url: 3.10 },
    { um: 2.18, fm: 1.66, status: 'away', url: 2.78 },
    { um: 1.90, fm: 1.86, status: 'home', url: 2.70 },
    { um: 2.14, fm: 1.68, status: 'away', url: 2.64 },
    { um: 2.08, fm: 1.72, status: 'away', url: 2.64 },
    { um: 2.92, fm: 1.39, status: 'away', url: 3.85 },
    { um: 2.28, fm: 1.60, status: 'away', url: 2.96 },
    { um: 2.20, fm: 1.64, status: 'home', url: 3.25 },
    { um: 2.06, fm: 1.73, status: 'away', url: 2.56 },
    { um: 2.44, fm: 1.53, status: 'home', url: 3.20 }
  ];
  function calculateMetrics() {
    const homeGames = games.filter(g => g.status === 'home');
    const awayGames = games.filter(g => g.status === 'away');
    const homeDiscrepancies = homeGames.map(g => g.p_um - g.p_url);
    const awayDiscrepancies = awayGames.map(g => g.p_um - g.p_url);
    const avgHomeDiscrepancy = homeGames.length ? homeDiscrepancies.reduce((sum, d) => sum + d, 0) / homeGames.length : 0;
    const avgAwayDiscrepancy = awayGames.length ? awayDiscrepancies.reduce((sum, d) => sum + d, 0) / awayGames.length : 0;
    games.forEach(game => {
      const avgDiscrepancy = game.status === 'home' ? avgHomeDiscrepancy : avgAwayDiscrepancy;
      game.diff_from_avg = (game.p_um - game.p_url) - avgDiscrepancy;
      const fair_p_url = game.p_um - avgDiscrepancy;
      const fair_url = fair_p_url > 0 ? 1 / fair_p_url : Infinity;
      game.ev = game.url - fair_url;
    });
    updateTable();
  }
  function updateTable() {
    const tbody = document.querySelector('#tbl tbody');
    tbody.innerHTML = '';
    games.forEach((game, index) => {
      const row = document.createElement('tr');
      row.innerHTML = `<td>${index + 1}</td><td>${game.um.toFixed(2)}</td><td>${game.fm.toFixed(2)}</td><td>${game.status}</td><td>${game.url.toFixed(2)}</td><td>${(game.p_um * 100).toFixed(2)}</td><td>${(game.p_url * 100).toFixed(2)}</td><td>${((game.p_um - game.p_url) * 100).toFixed(2)}</td><td>${(game.diff_from_avg * 100).toFixed(2)}</td><td class="${game.ev > 0 ? 'pos' : 'neg'}">${game.ev > 0 ? '+' : ''}${game.ev.toFixed(2)}</td>`;
      tbody.appendChild(row);
    });
    const homeGames = games.filter(g => g.status === 'home');
    const awayGames = games.filter(g => g.status === 'away');
    const homeAvg = homeGames.length ? homeGames.reduce((sum, g) => sum + (g.p_um - g.p_url), 0) / homeGames.length * 100 : 0;
    const awayAvg = awayGames.length ? awayGames.reduce((sum, g) => sum + (g.p_um - g_p_url), 0) / awayGames.length * 100 : 0;
    const allAvg = games.length ? games.reduce((sum, g) => sum + (g.p_um - g.p_url), 0) / games.length * 100 : 0;
    const avgRow = (label, value) => {
      const row = document.createElement('tr');
      row.className = 'avg-row';
      row.innerHTML = `<td colspan="7">${label}</td><td>${value.toFixed(2)}</td><td colspan="2"></td>`;
      tbody.appendChild(row);
    };
    avgRow('Average Home Discrepancy', homeAvg);
    avgRow('Average Away Discrepancy', awayAvg);
    avgRow('Average All Discrepancy', allAvg);
  }
  function addRow() {
    const um = parseFloat(document.getElementById('ml').value);
    const fm = parseFloat(document.getElementById('fav').value);
    const status = document.getElementById('loc').value;
    if (isNaN(um) || isNaN(fm) || um <= 1 || fm <= 1) {
      alert('Please enter valid decimal odds greater than 1.');
      return;
    }
    const url = parseFloat(prompt('Enter actual underdog -1.5 decimal odds:'));
    if (isNaN(url) || url <= 1) {
      alert('Please enter valid run line odds greater than 1.');
      return;
    }
    const p_um = (1 / um) / (1 / um + 1 / fm);
    const p_url = 1 / url;
    games.unshift({ um, fm, status, url, p_um, p_url, diff_from_avg: 0, ev: 0 });
    gameCounter++;
    calculateMetrics();
    document.getElementById('ml').value = '';
    document.getElementById('fav').value = '';
    document.getElementById('loc').value = 'home';
  }
  exampleData.forEach(data => {
    const p_um = (1 / data.um) / (1 / data.um + 1 / data.fm);
    const p_url = 1 / data.url;
    games.unshift({ um: data.um, fm: data.fm, status: data.status, url: data.url, p_um, p_url, diff_from_avg: 0, ev: 0 });
    gameCounter++;
  });
  calculateMetrics();
</script>
</body>
</html>